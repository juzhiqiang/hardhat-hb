# Hardhat çº¢åŒ…åˆçº¦ (hardhat-hb)

ä¸€ä¸ªåŸºäºä»¥å¤ªåŠçš„æ™ºèƒ½åˆçº¦é¡¹ç›®ï¼Œå®ç°äº†çº¢åŒ…åŠŸèƒ½ã€‚åˆçº¦åŒ…å« 0.05 ETHï¼Œå¯ä»¥ç”± 6 ä¸ªäººéšæœºåˆ†é…é¢†å–ã€‚

## ğŸ¯ é¡¹ç›®ç‰¹ç‚¹

- ğŸ’° æ€»é‡‘é¢ï¼š0.05 ETH
- ğŸ‘¥ å‚ä¸äººæ•°ï¼šæœ€å¤š 6 äºº
- ğŸ² éšæœºåˆ†é…ï¼šæ¯ä¸ªäººè·å¾—éšæœºé‡‘é¢
- ğŸ”’ å®‰å…¨æ€§ï¼šä½¿ç”¨ OpenZeppelin åˆçº¦åº“
- â›½ Gas ä¼˜åŒ–ï¼šç»è¿‡ä¼˜åŒ–çš„æ™ºèƒ½åˆçº¦

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **Hardhat**: å¼€å‘æ¡†æ¶
- **Solidity**: æ™ºèƒ½åˆçº¦è¯­è¨€ (^0.8.19)
- **OpenZeppelin**: å®‰å…¨çš„åˆçº¦åº“
- **Ethers.js**: ä»¥å¤ªåŠäº¤äº’åº“
- **Chai**: æµ‹è¯•æ¡†æ¶

## ğŸ“¦ å®‰è£…ä¾èµ–

```bash
npm install
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¼–è¯‘åˆçº¦

```bash
npm run compile
```

### 2. è¿è¡Œæµ‹è¯•

```bash
npm run test
```

### 3. å¯åŠ¨æœ¬åœ°èŠ‚ç‚¹

```bash
npm run node
```

### 4. éƒ¨ç½²åˆ°æœ¬åœ°ç½‘ç»œ

```bash
npm run deploy:local
```

### 5. ä¸åˆçº¦äº¤äº’

éƒ¨ç½²æˆåŠŸåï¼Œå°†åˆçº¦åœ°å€å¤åˆ¶åˆ° `scripts/interact.js` ä¸­çš„ `CONTRACT_ADDRESS`ï¼Œç„¶åè¿è¡Œï¼š

```bash
npm run interact
```

## ğŸ“‹ åˆçº¦åŠŸèƒ½

### ä¸»è¦åŠŸèƒ½

- **claimRedPacket()**: é¢†å–çº¢åŒ…
- **getRedPacketInfo()**: è·å–çº¢åŒ…çŠ¶æ€ä¿¡æ¯
- **getClaimers()**: è·å–å·²é¢†å–ç”¨æˆ·åˆ—è¡¨
- **getContractBalance()**: è·å–åˆçº¦ä½™é¢

### ç®¡ç†å‘˜åŠŸèƒ½

- **deposit()**: å……å€¼ETHåˆ°åˆçº¦
- **emergencyWithdraw()**: ç´§æ€¥æå–å‰©ä½™èµ„é‡‘

## ğŸ§ª æµ‹è¯•

è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶ï¼š

```bash
npm run test
```

æµ‹è¯•è¦†ç›–ï¼š
- âœ… åˆçº¦éƒ¨ç½²
- âœ… çº¢åŒ…é¢†å–
- âœ… é˜²æ­¢é‡å¤é¢†å–
- âœ… éšæœºé‡‘é¢åˆ†é…
- âœ… 6äººé™åˆ¶
- âœ… ç®¡ç†å‘˜åŠŸèƒ½
- âœ… ç´§æ€¥æƒ…å†µå¤„ç†

## ğŸŒ ç½‘ç»œéƒ¨ç½²

### é…ç½®ç¯å¢ƒå˜é‡

1. å¤åˆ¶ `.env.example` åˆ° `.env`
2. å¡«å…¥ä½ çš„ç§é’¥å’Œå…¶ä»–é…ç½®ä¿¡æ¯

```bash
cp .env.example .env
```

### éƒ¨ç½²åˆ°æµ‹è¯•ç½‘

```bash
# éƒ¨ç½²åˆ° Sepolia æµ‹è¯•ç½‘
npm run deploy:sepolia

# éƒ¨ç½²åˆ°ä¸»ç½‘ (è°¨æ…æ“ä½œ!)
npm run deploy:mainnet
```

## ğŸ”§ å¯ç”¨è„šæœ¬

- `npm run compile` - ç¼–è¯‘åˆçº¦
- `npm run test` - è¿è¡Œæµ‹è¯•
- `npm run deploy:local` - éƒ¨ç½²åˆ°æœ¬åœ°ç½‘ç»œ
- `npm run deploy:sepolia` - éƒ¨ç½²åˆ° Sepolia æµ‹è¯•ç½‘
- `npm run deploy:mainnet` - éƒ¨ç½²åˆ°ä¸»ç½‘
- `npm run interact` - ä¸åˆçº¦äº¤äº’
- `npm run node` - å¯åŠ¨æœ¬åœ° Hardhat èŠ‚ç‚¹
- `npm run clean` - æ¸…ç†æ„å»ºæ–‡ä»¶
- `npm run coverage` - è¿è¡Œæµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š

## ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹

### éƒ¨ç½²å’Œäº¤äº’æµç¨‹

1. **å¯åŠ¨æœ¬åœ°èŠ‚ç‚¹**
   ```bash
   npm run node
   ```

2. **éƒ¨ç½²åˆçº¦**
   ```bash
   npm run deploy:local
   ```

3. **å¤åˆ¶åˆçº¦åœ°å€åˆ°äº¤äº’è„šæœ¬**
   ```javascript
   // åœ¨ scripts/interact.js ä¸­
   const CONTRACT_ADDRESS = "0x5FbDB2315678afecb367f032d93F642f64180aa3";
   ```

4. **æ¨¡æ‹Ÿå¤šä¸ªç”¨æˆ·é¢†å–çº¢åŒ…**
   ```bash
   npm run interact
   ```

### åˆçº¦çŠ¶æ€æŸ¥è¯¢

```javascript
// è·å–çº¢åŒ…ä¿¡æ¯
const info = await redPacket.getRedPacketInfo();
console.log("å‰©ä½™é‡‘é¢:", ethers.utils.formatEther(info._remainingAmount));
console.log("å·²é¢†å–äººæ•°:", info._claimedCount.toString());

// æ£€æŸ¥æ˜¯å¦å·²é¢†å–
const hasClaimed = await redPacket.hasClaimed(userAddress);
if (hasClaimed) {
    const amount = await redPacket.claimedAmount(userAddress);
    console.log("å·²é¢†å–:", ethers.utils.formatEther(amount), "ETH");
}
```

## ğŸ”’ å®‰å…¨ç‰¹æ€§

- **ReentrancyGuard**: é˜²æ­¢é‡å…¥æ”»å‡»
- **Ownable**: è®¿é—®æ§åˆ¶
- **éšæœºç®—æ³•**: ä½¿ç”¨åŒºå—ä¿¡æ¯ç”Ÿæˆä¼ªéšæœºæ•°
- **ä½™é¢æ£€æŸ¥**: é˜²æ­¢è¶…é¢æå–
- **äº‹ä»¶æ—¥å¿—**: å®Œæ•´çš„æ“ä½œè®°å½•

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **æµ‹è¯•ç¯å¢ƒ**: è¯·å…ˆåœ¨æµ‹è¯•ç½‘ç»œå……åˆ†æµ‹è¯•
2. **ç§é’¥å®‰å…¨**: ä¸è¦å°†ç§é’¥æäº¤åˆ°ä»£ç ä»“åº“
3. **Gasè´¹ç”¨**: ä¸»ç½‘éƒ¨ç½²éœ€è¦çœŸå®çš„ETHä½œä¸ºGasè´¹
4. **éšæœºæ€§**: å½“å‰ä½¿ç”¨åŒºå—ä¿¡æ¯ç”Ÿæˆéšæœºæ•°ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒå¯è€ƒè™‘ä½¿ç”¨Chainlink VRF
5. **åˆçº¦éªŒè¯**: éƒ¨ç½²åˆ°ä¸»ç½‘åå»ºè®®è¿›è¡Œåˆçº¦éªŒè¯

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®ä½¿ç”¨ MIT è®¸å¯è¯ã€‚è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issues å’Œ Pull Requestsï¼

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ GitHub Issues è”ç³»ã€‚

---

**æ³¨æ„**: è¿™æ˜¯ä¸€ä¸ªæ¼”ç¤ºé¡¹ç›®ï¼Œè¯·åœ¨ä½¿ç”¨çœŸå®èµ„é‡‘å‰è¿›è¡Œå……åˆ†æµ‹è¯•ï¼